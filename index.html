<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Table</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #333;
      display: -webkit-box;
      display: flex;
      -webkit-box-align: center;
      align-items: center;
      -webkit-box-pack: center;
      justify-content: center;
      -webkit-box-orient: vertical;
      -webkit-box-direction: normal;
      flex-direction: column;
      height: 100vh;
      color: #fff;
    }

    #canvas {
      margin-bottom: 20px;
    }

    input[type="range"][disabled] {
      opacity: 0.1;
    }

    #previewTable,
    #createButton {
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <canvas id="canvas"></canvas>

  <label for="scaleRange">Scale</label>
  <input id="scaleRange" type="range" disabled="disabled" min="0.1" max="2" step="0.1" value="1" />

  <label for="rotateRange">Rotate</label>
  <input id="rotateRange" type="range" disabled="disabled" min="-360" max="360" step="1" value="0" />

  <button id="createButton" type="button">Create Table</button>
  <img id="previewTable" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="./canvas-table.js"></script>
  <script>
    $(document).ready(function () {
      const $canvasTable = $("#canvas").canvasTable({
        width: 400,
        height: 400,
        gap: 5,
        strokeDash: 5,
        strokeWidth: 2,
        // css grid template areas
        templateAreas: ["photo1 photo1 photo1", "photo2 photo3 photo3"],
        images: [
          {
            area: "photo1",
            source:
              "https://images.unsplash.com/photo-1589347528952-62cf2bd93f18?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ"
          },
          {
            area: "photo2",
            source:
              "https://images.unsplash.com/photo-1587928901212-e90704d83380?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ"
          },
          {
            area: "photo3",
            source:
              "https://images.unsplash.com/photo-1588691551142-3da6178a482e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ"
          }
        ],
        onSelected(selectedArea) {
          $("#scaleRange").attr("disabled", false);
          $("#rotateRange").attr("disabled", false);
          $("#scaleRange").val(selectedArea.image.scale);
          $("#rotateRange").val(selectedArea.image.rotate);
        }
      });

      $("#scaleRange").on("input", (event) => {
        $canvasTable.changeScale(event.target.value);
      });

      $("#rotateRange").on("input", (event) => {
        $canvasTable.changeRotate(event.target.value);
      });

      $("#createButton").click(() => {
        $canvasTable.setDefault();
        const canvasSource = $canvasTable.createPhoto();
        $("#previewTable").attr("src", canvasSource);
      });
    });
  </script>
</body>

</html>
